// ðŸŽ¯ Game Logic Script â€“ Generated by Copilot Jason v3.7

console.log('âœ… Game logic initialized');

// Local Storage fÃ¼r Punkte & Fortschritt
if (!localStorage.getItem('rallyePoints')) localStorage.setItem('rallyePoints', 0);

function updatePoints(amount) {
  let current = parseInt(localStorage.getItem('rallyePoints')) || 0;
  current += amount;
  localStorage.setItem('rallyePoints', current);
  document.querySelector('#points').textContent = current;
}

// RÃ¤tsel freischalten
function unlockRiddle(day) {
  const today = new Date().getDate();
  if (day <= today) {
    document.querySelector(`#riddle-${day}`).classList.remove('locked');
  }
}

// Countdown bis zum nÃ¤chsten RÃ¤tsel
function updateCountdown() {
  const now = new Date();
  const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
  const diff = nextMidnight - now;
  const hours = Math.floor(diff / 1000 / 60 / 60);
  const mins = Math.floor((diff / 1000 / 60) % 60);
  const secs = Math.floor((diff / 1000) % 60);
  document.getElementById('nextRiddleTime').textContent = `${hours}h ${mins}m ${secs}s`;
}
setInterval(updateCountdown, 1000);

// Musikplayer verbinden
const bgPlayer = new Audio('./music/background.mp3');
bgPlayer.loop = true;
bgPlayer.volume = 0.3;

function toggleMusic() {
  if (bgPlayer.paused) {
    bgPlayer.play();
    document.getElementById('musicToggle').textContent = 'â¸ Pause Musik';
  } else {
    bgPlayer.pause();
    document.getElementById('musicToggle').textContent = 'ðŸŽµ Musik abspielen';
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const btn = document.createElement('button');
  btn.id = 'musicToggle';
  btn.textContent = 'ðŸŽµ Musik abspielen';
  btn.onclick = toggleMusic;
  document.body.prepend(btn);
  updateCountdown();
});